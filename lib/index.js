!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.demo=t():e.demo=t()}(self,(function(){return(()=>{var e={607:function(e,t,r){var a,n,o,s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},u=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function s(e){try{i(a.next(e))}catch(e){o(e)}}function u(e){try{i(a.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}i((a=a.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,a,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,a=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};!function(s){if("object"==typeof e.exports){var u=s(r(875),t);void 0!==u&&(e.exports=u)}else n=[r,t],void 0===(o="function"==typeof(a=s)?a.apply(t,n):a)||(e.exports=o)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("axios"),a=r.CancelToken,n=function(){function e(t,n){var o=this;this.cancel=null,this.delay=!1,this.needCancel=!1,this.shake=!1,n&&(e.request=n.request,e.response=n.response),this.Http=r.create(t),this.Http.interceptors.request.use((function(t){return u(o,void 0,void 0,(function(){var r,n,o,s,u,c;return i(this,(function(i){return r=t.url,n=t.method,o=t.data,s=t.params,u=this.needCancel,c=this,u&&(t.cancelToken=new a((function(t){var a={url:r,method:n,data:o,params:s,cancel:t};e.requestMap.set(c.getKey(r,n),a)}))),e.request?[2,e.request(t)]:[2,t]}))}))}),(function(t){var r=t.config,a=r.url,n=r.method,s=o,u=s.needCancel;s.shake&&e.shakeMap.delete(o.getKey(a,n)),u&&e.requestMap.delete(o.getKey(a,n))})),this.Http.interceptors.response.use((function(t){var r=o,a=r.shake,n=r.needCancel,s=t.config,u=s.url,i=s.method;return a&&e.shakeMap.delete(o.getKey(u,i)),n&&e.requestMap.delete(o.getKey(u,i)),200===t.status?(e.autoWorker.attemptMap.get(o.getKey(u,i))&&(e.autoWorker.attemptMap.delete(o.getKey(u,i)),0===e.autoWorker.attemptMap.size&&(e.autoWorker.autoAttempt=!1,e.trySuccess&&e.trySuccess())),e.response?e.response(t):t.data):Promise.reject(t.toString())}),(function(t){var r=o,a=r.shake,n=r.needCancel,u=t.config,i=u.url,c=u.method;if(a&&e.shakeMap.delete(o.getKey(i,c)),n&&e.requestMap.delete(o.getKey(i,c)),t&&t.response)switch(t.response.status){case 400:t.message="请求参数错误";break;case 401:t.message="未授权，请登录";break;case 403:t.message="跨域拒绝访问";break;case 404:t.message="请求地址出错: "+t.response.config.url;break;case 408:t.message="请求超时";break;case 500:t.message="服务器内部错误";break;case 501:t.message="服务未实现";break;case 502:t.message="网关错误";break;case 503:t.message="服务不可用";break;case 504:t.message="网关超时";break;case 505:t.message="HTTP版本不受支持"}if(t.message.search("timeout")>-1){var p=e.maxReconnectionTimes,l=e.autoWorker.attemptMap;if(o.requester){var h=o.requester,d=h.url,f=h.method,m=l.get(o.getKey(d,f));return m?m.autoCounts&&p>m.autoCounts?(m.autoCounts++,e.autoWorker.attemptMap.set(o.getKey(d,f),m),o.reconnect()):(e.autoWorker.attemptMap.delete(o.getKey(d,f)),0===e.autoWorker.attemptMap.size&&(e.autoWorker.autoAttempt=!1,e.tryFail&&e.tryFail()),Promise.reject("重连失败")):(e.autoWorker.attemptMap.set(o.getKey(d,f),s(s({},o.requester),{autoCounts:1})),o.reconnect())}}}))}return e.prototype.sleep=function(t){return new Promise((function(r){return e.Timer=setTimeout(r,t)}))},e.prototype.reconnect=function(){var t=this;return e.autoWorker.autoAttempt||(e.autoWorker.autoAttempt=!0,e.tryBegin&&e.tryBegin()),new Promise((function(t){setTimeout((function(){t()}),e.timeStep)})).then((function(){return t.requester&&t.dispatch(t.requester)}))},e.prototype.get=function(e,t,r,a){return this.dispatch(s({params:t,url:e,headers:a,method:"get"},r))},e.prototype.post=function(e,t,r,a){return this.dispatch(s(s({data:t,url:e,headers:a},r),{method:"post"}))},e.prototype.put=function(e,t,r,a){return this.dispatch(s(s({data:t,url:e,headers:a},r),{method:"put"}))},e.prototype.delete=function(e,t,r,a){return this.dispatch(s(s({data:t,url:e,headers:a},r),{method:"delete"}))},e.prototype.patch=function(e,t,r,a){return this.dispatch(s(s({data:t,url:e,headers:a},r),{method:"patch"}))},e.prototype.dispatch=function(t){return u(this,void 0,void 0,(function(){var r,a,n,o,s,u,c,p,l,h,d,f;return i(this,(function(i){switch(i.label){case 0:return this.requester=t,r=t.url,a=t.method,n=t.data,o=t.params,s=t.headers,u=t.delayTime,c=t.delay,p=t.shake,l=t.needCancel,this.delay=null!=c&&c,this.shake=null!=p&&p,this.needCancel=null!=l&&l,h=e.shakeMap,d=e.requestMap,l&&d.has(this.getKey(r,a))&&(f=d.get(this.getKey(r,a)))&&f.cancel&&(f.cancel("取消接口"),e.requestMap.delete(this.getKey(r,a))),c?(e.Timer&&clearTimeout(e.Timer),[4,this.sleep(u||e.delayTime)]):[3,2];case 1:i.sent(),i.label=2;case 2:if(p){if(h.has(this.getKey(r,a)))return[2,Promise.reject({message:r+"正在请求，请勿重复提交"})];h.delete(this.getKey(r,a))}return[2,this.Http({url:r,method:a,data:n,params:o,headers:null!=s?s:this.Http.defaults.headers})]}}))}))},e.prototype.getKey=function(e,t){return"url="+e+"method="+t},e.requestMap=new Map,e.shakeMap=new Map,e.timeStep=1e3,e.maxReconnectionTimes=5,e.delayTime=500,e.autoWorker={autoAttempt:!1,attemptMap:new Map},e}();t.default=n}))},875:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=875,e.exports=t}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,r),o.exports}return r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(607)})()}));